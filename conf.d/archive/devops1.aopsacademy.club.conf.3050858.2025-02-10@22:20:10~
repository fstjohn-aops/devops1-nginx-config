server {
	server_name devops1.aopsacademy.club
		www.devops1.aopsacademy.club
		bellevue.devops1.aopsacademy.club
		frisco.devops1.aopsacademy.club
		fremont.devops1.aopsacademy.club
		gaithersburg.devops1.aopsacademy.club
		irvine.devops1.aopsacademy.club
		lexington.devops1.aopsacademy.club
		lumen.devops1.aopsacademy.club
		millburn.devops1.aopsacademy.club
		morrisville.devops1.aopsacademy.club
		mountainview.devops1.aopsacademy.club
		pleasanton.devops1.aopsacademy.club
		princeton.devops1.aopsacademy.club
		redmond.devops1.aopsacademy.club
		sandiego-cv.devops1.aopsacademy.club
		santaclara.devops1.aopsacademy.club
		test.devops1.aopsacademy.club
		vienna.devops1.aopsacademy.club
		virtual.devops1.aopsacademy.club
		certtest.devops1.aopsacademy.club
		test-virtual.devops1.aopsacademy.club;

	listen 80;

	# 301 is a notification of a permanent re-direct.
	return 301 https://$server_name$request_uri;
}

server {
	server_name devops1.aopsacademy.club
		www.devops1.aopsacademy.club
		bellevue.devops1.aopsacademy.club
		frisco.devops1.aopsacademy.club
		fremont.devops1.aopsacademy.club
		gaithersburg.devops1.aopsacademy.club
		irvine.devops1.aopsacademy.club
		lexington.devops1.aopsacademy.club
		lumen.devops1.aopsacademy.club
		millburn.devops1.aopsacademy.club
		morrisville.devops1.aopsacademy.club
		mountainview.devops1.aopsacademy.club
		pleasanton.devops1.aopsacademy.club
		princeton.devops1.aopsacademy.club
		redmond.devops1.aopsacademy.club
		sandiego-cv.devops1.aopsacademy.club
		santaclara.devops1.aopsacademy.club
		test.devops1.aopsacademy.club
		vienna.devops1.aopsacademy.club
		virtual.devops1.aopsacademy.club
		certtest.devops1.aopsacademy.club
		test-virtual.devops1.aopsacademy.club;

	# SSL default settings.
	include /etc/nginx/includes/ssl_settings.conf;

	# ACME challenge
	include /etc/nginx/includes/acme.conf;

	location / {
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $remote_addr;
		proxy_set_header Host $http_host;
		proxy_pass http://academy;
	}

	# Fonts need access control allow origin
	location ~*\.(eot|ttf|woff|woff2)$ {
		add_header Access-Control-Allow-Origin *;
		root /var/www/aops-academy;
		expires 1d;
		break;
	}

	location ~ /\.git {
		return 404;
	}
}
